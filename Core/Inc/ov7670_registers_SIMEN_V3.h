/*
 * ov7670_registers_SIMEN_V3.h
 * config2
 *
 *  Created on: Jul 7, 2021
 *      Author: Simen
 */

#ifndef INC_OV7670_REGISTERS_SIMEN_V3_H_
#define INC_OV7670_REGISTERS_SIMEN_V3_H_

#define REG_BATT 0xFF

static const uint8_t OV7670_reg[][2] = {
		  /* Color mode related */
		  {0x12, 0x14},   // QVGA, RGB
		  {0x8C, 0x00},   // RGB444 Disable
		  {0x40, 0x10 + 0xc0},   // RGB565, 00 - FF - fullscale is 0xD0 (0x10+0xc0) - MIT use 0x10
		  //{0x3D, 0x80 + 0x00},   // gamma enable, UV auto adjust, UYVY
		  {0x3A, 0x0C}, // UYVY (why?) (Default)
		  {0x3D, 0xC0}, // gamma enable, UV auto adjust, UYVY
		  {0xB0, 0x84}, // important



		  /* Clock Configuration */
		  {0x0C, 0x04},  // DCW enable
		  {0x3E, 0x19},  // manual scaling, pclk/=2
		  {0x70, 0x3A},  // scaling_xsc
		  {0x71, 0x35},  // scaling_ysc
		  {0x72, 0x11}, // down sample by 2
		  {0x73, 0xf1}, // DSP clock /= 2

		  /* Windowing (Empirically Decided) */
		  {0x17, 0x16},   // HSTART
		  {0x18, 0x04},   // HSTOP
		  {0x32, 0x80},   // HREF
		  {0x19, 0x03},   // VSTART =  14 ( = 3 * 4 + 2)
		  {0x1a, 0x7b},   // VSTOP  = 494 ( = 123 * 4 + 2)
		  {0x03, 0x0a},   // VREF (VSTART_LOW = 2, VSTOP_LOW = 2)

		  /* Color Matrix Coefficients */ //- MIT
//		  {0x4f, 0x80},
//		  {0x50, 0x80},
//		  {0x51, 0x00},
//		  {0x52, 0x22},
//		  {0x53, 0x5e},
//		  {0x54, 0x80},
//		  {0x58, 0x9e}, //automatic contrast center / a bit brighter only

//		  //remove overflow when doubling
//		  {0x4f, 254},
//		  {0x50, 254},
//		  {0x51, 00},
//		  {0x52, 44},
//		  {0x53, 188},
//		  {0x54, 254},
//		  {0x58, 0x9e}, //automatic contrast center / a bit brighter only

		  { 0x4f, 0xb3 },		/* "matrix coefficient 1" */
		  { 0x50, 0xb3 },		/* "matrix coefficient 2" */
		  { 0x51, 0    },		/* vb */
		  { 0x52, 0x3d },		/* "matrix coefficient 4" */
		  { 0x53, 0xa7 },		/* "matrix coefficient 5" */
		  { 0x54, 0xe4 },		/* "matrix coefficient 6" */
		  {0x58, 0x9e}, //automatic contrast center / a bit brighter only
		  /* Auto Edge Enhancement, Auto Denoising, AWG Gain Enable */
		  //{0x41, 0x38}, //microsoft - mess up image


		 {0x41, 0x18}, //
		  //{0x41, 0x1a},
		  //denoise off - 28 - still bad
		  //edge off - 18 - WORKS
		  //awb and double - 0A
		  //awb and double adn denoise - 1A

		  /* AGC and AEC parameters.  Note we start by disabling those features,
		     then turn them only after tweaking the values. */
		  {0x13, 0xE0},
		  {0xA5, 0x05},
		  {0xAB, 0x07},
		  {0x24, 0x95},
		  {0x25, 0x33},
		  {0x26, 0xE3},
		  {0x9F, 0x78},
		  {0xA0, 0x68},
		  {0xA1, 0x03}, /* Magic */
		  {0xA6, 0xD8},
		  {0xA7, 0xD8},
		  {0xA8, 0xF0},
		  {0xA9, 0x90},
		  {0xAA, 0x94},
		  {0x13, 0xE5},



//		///*Simple AWG*/ - fix green problem
//		  {0x13, 0xe7}, //AWB on (auto light mode)
//		  {0x6f, 0x9f}, // Simple AWB
//		//advanced AWG - evan - dont work
//		{ 0x43, 0x0a }, //
//		{ 0x44, 0xf0 }, //
//		{ 0x45, 0x34 }, //
//		{ 0x46, 0x58 }, //
//		{ 0x47, 0x28 }, //
//		{ 0x48, 0x3a }, //
//		{ 0x59, 0x88 }, //
//		{ 0x5a, 0x88 }, //
//		{ 0x5b, 0x44 }, //
//		{ 0x5c, 0x67 }, //
//		{ 0x5d, 0x49 }, //
//		{ 0x5e, 0x0e }, //
//		{ 0x6c, 0x0a }, //
//		{ 0x6d, 0x55 }, //
//		{ 0x6e, 0x11 }, //
//		{ 0x6f, 0x9e }, //
//		{ 0x6a, 0x40 }, //
//		{ 0x01, 0x40 }, //
//		{ 0x02, 0x60 }, //
//		{ 0x13, 0xe7 },

		  //Microsoft white balance
		  /* White Balance Magic Numbers*/
		  {0x43, 0x0A},
		  {0x44, 0xF0},
		  {0x45, 0x34},
		  {0x46, 0x58},
		  {0x47, 0x28},
		  {0x48, 0x3A},
		  {0x59, 0x88},
		  {0x5A, 0x88},
		  {0x5B, 0x44},
		  {0x5C, 0x67},
		  {0x5D, 0x49},
		  {0x5E, 0x0E},
		  {0x6A, 0x40},
		  {0x6C, 0x0A},
		  {0x6D, 0x55},
		  {0x6E, 0x11},
		  {0x6F, 0x9F}, /* "9e for advance AWB" , 9F for simple */ // advanced don't work
		  {0x01, 0x40},
		  {0x02, 0x60},
		  {0x13, 0xE7},


		  /* Additional Magic Values */
		  {0x0E, 0x61},
		  {0x0F, 0x4B},
		  {0x16, 0x02},
		  {0x21, 0x02},
		  {0x22, 0x91},
		  {0x29, 0x07},
		  {0x33, 0x0B},
		  {0x35, 0x0B},
		  {0x37, 0x1D},
		  {0x38, 0x71},
		  {0x39, 0x2A},
		  {0x3C, 0x78},
		  {0x4D, 0x40},
		  {0x4E, 0x20},
		  {0x69, 0x00},
		  {0x74, 0x10},
		  {0x8D, 0x4F},
		  {0x8E, 0x00},
		  {0x8F, 0x00},
		  {0x90, 0x00},
		  {0x91, 0x00},
		  {0x96, 0x00},
		  {0x9A, 0x00},
		  {0xB1, 0x0C},
		  {0xB2, 0x0E},
		  {0xB3, 0x82},
		  {0xB8, 0x0A},

		  {0x77, 0x01},
		  {0xC9, 0x60},
		  {0x97, 0x30},
		  {0x98, 0x20}, //more pink /white better before this
		  {0x99, 0x30},
		  {0x9A, 0x84},
		  {0x9B, 0x29},
		  {0x9C, 0x03},
		  {0x9D, 0x4C}, //white good again
		  {0x9E, 0x3F},
		  {0x78, 0x04}, //makes it dark


		  /* gamma curve */
		  {0x7b, 16},
		  {0x7c, 30},
		  {0x7d, 53},
		  {0x7e, 90},
		  {0x7f, 105},
		  {0x80, 118},
		  {0x81, 130},
		  {0x82, 140},
		  {0x83, 150},
		  {0x84, 160},
		  {0x85, 180},
		  {0x86, 195},
		  {0x87, 215},
		  {0x88, 230},
		  {0x89, 244},
		  {0x7a, 16},

		  //GAMMa V2 - not plotted
//		{ 0x7a, 0x20 }, //
//		{ 0x7b, 0x10 }, //
//		{ 0x7c, 0x1e }, //
//		{ 0x7d, 0x35 }, //
//		{ 0x7e, 0x5a }, //
//		{ 0x7f, 0x69 }, //
//		{ 0x80, 0x76 }, //
//		{ 0x81, 0x80 }, //
//		{ 0x82, 0x88 }, //
//		{ 0x83, 0x8f }, //
//		{ 0x84, 0x96 }, //
//		{ 0x85, 0xa3 }, //
//		{ 0x86, 0xaf }, //
//		{ 0x87, 0xc4 }, //
//		{ 0x88, 0xd7 }, //
//		{ 0x89, 0xe8 },

//		  //Linux driver - gamma
//		  { 0x7a, 0x20 },		{ 0x7b, 0x10 },
//		  	{ 0x7c, 0x1e },		{ 0x7d, 0x35 },
//		  	{ 0x7e, 0x5a },		{ 0x7f, 0x69 },
//		  	{ 0x80, 0x76 },		{ 0x81, 0x80 },
//		  	{ 0x82, 0x88 },		{ 0x83, 0x8f },
//		  	{ 0x84, 0x96 },		{ 0x85, 0xa3 },
//		  	{ 0x86, 0xaf },		{ 0x87, 0xc4 },
//		  	{ 0x88, 0xd7 },		{ 0x89, 0xe8 },



		//{ 0xb1, 0x04 },

		//{ 0xb3, 0x82 },		//Lower Limit of Black Level + 0x80






		  //FIX GAIN
		  //{0x69,0x06}, //Bx1.5, Rx1.25, Gx1
		  //{0x69,0x07},	 //Bx1.75, Rx1.25, Gx1
		  //{0x69,0x0B},	 //Bx1.75, Rx1.5, Gx1

		 // brightness
		  //{0x55, 0x18}, +1


		  /* fps */
		    {0x11, 0x00}, // pre-scalar = 1/1   (night mode: 0x11, 0x03)

		  //{0x42, 0x08}, // test bar

		  {REG_BATT, REG_BATT},
};

#endif /* INC_OV7670_REGISTERS_SIMEN_V3_H_ */
